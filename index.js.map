{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiKey = '51493488-12143edce1099078d847fb8bb';\n\nexport async function getImagesByQuery(query, page) {\n  try {\n    const encodedQuery = encodeURIComponent(query.trim());\n    const url = `https://pixabay.com/api/?key=${apiKey}&q=${encodedQuery}&orientation=horizontal&image_type=photo&safesearch=true&per_page=15&page=${page}`;\n    const response = await axios.get(url);\n\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst show = document.querySelector('.show-more');\n\nlet lightbox;\n\nexport function createGallery(images) {\n  let item = images\n    .map(elem => {\n      let imgUrl = elem.webformatURL;\n      let bigImg = elem.largeImageURL;\n      let likes = elem.likes;\n      let views = elem.views;\n      let comments = elem.comments;\n      let downloads = elem.downloads;\n\n      return `\n      <li class=\"gallery-item\">\n      <a href=\"${bigImg}\">\n        <img src=\"${imgUrl}\" alt=\"\" />\n        <ul class=\"img_info\">\n          <li>\n            <p class=\"info_title\">Likes</p>\n            <p>${likes}</p>\n          </li>\n          <li>\n            <p class=\"info_title\">Views</p>\n            <p>${views}</p>\n          </li>\n          <li>\n            <p class=\"info_title\">Comments</p>\n            <p>${comments}</p>\n          </li>\n          <li>\n            <p class=\"info_title\">Downloads</p>\n            <p>${downloads}</p>\n          </li>\n        </ul>\n      </a>\n    </li>\n      `;\n    })\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', item);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captions: true,\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  } else {\n    lightbox.refresh();\n  }\n}\nexport function clearGallery() {\n  if (gallery) {\n    gallery.innerHTML = '';\n  }\n}\nexport function showLoader() {\n  if (loader) {\n    loader.classList.remove('none');\n  }\n}\nexport function hideLoader() {\n  if (loader) {\n    loader.classList.add('none');\n  }\n}\n\nexport function showLoadMoreButton() {\n  if (show) {\n    show.classList.remove('none');\n  }\n}\n\nexport function hideLoadMoreButton() {\n  if (show) {\n    show.classList.add('none');\n  }\n}\n","import { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nconst btn = document.querySelector('.show-more');\n\nhideLoadMoreButton();\n\nlet page = 1;\nlet value = '';\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  clearGallery();\n\n  value = event.target.elements['search-text'].value.trim();\n  if (!value) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search term.',\n    });\n    return;\n  }\n\n  showLoader();\n  clearGallery();\n\n  try {\n    const images = await getImagesByQuery(value, page);\n\n    let total = images.total;\n\n    if (images.hits.length >= total) {\n      iziToast.error({\n        message: 'Were sorry, but youve reached the end of search results',\n      });\n      hideLoadMoreButton();\n      return;\n    }\n\n    if (images.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      return;\n    }\n\n    createGallery(images.hits);\n\n    showLoadMoreButton();\n  } catch {\n    iziToast.error({\n      message: 'An error occurred while fetching images.',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n\nbtn.addEventListener('click', async () => {\n  page += 1;\n  showLoader();\n\n  try {\n    const images = await getImagesByQuery(value, page);\n\n    createGallery(images.hits);\n    const firstCard = document.querySelector('.gallery-item');\n    if (firstCard) {\n      const cardHeight = firstCard.getBoundingClientRect().height;\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n\n    if (images.totalHits <= page * 15) {\n      iziToast.info({\n        message: 'You have reached the end of the results.',\n      });\n      hideLoadMoreButton();\n    }\n  } catch {\n    iziToast.error({\n      message: 'Error loading more images.',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["apiKey","getImagesByQuery","query","page","encodedQuery","url","axios","error","gallery","loader","show","lightbox","createGallery","images","item","elem","imgUrl","bigImg","likes","views","comments","downloads","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","btn","value","event","iziToast","total","firstCard","cardHeight"],"mappings":"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"}